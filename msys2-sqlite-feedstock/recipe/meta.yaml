# This file was generated by gen-conda-repack-recipe
# using the MSYS2 package epoch: Sep 01 2024 06:00:00 UTC
#
# Any edits will be overwritten
#
# https://github.com/msys2/MSYS2-packages/blob/master/sqlite/PKGBUILD
{% set pkgname = "sqlite" %}
{% set pkgver = "3.46.1" %}
{% set pkgrel = "1" %}
{% set build_number = pkgrel|int * 1000 + 0 %}

package:
  name: repack_msys2-sqlite
  version: {{ pkgver }}

source:
  - url: https://repo.msys2.org/msys/x86_64/sqlite-{{ pkgver }}-{{ pkgrel }}-x86_64.pkg.tar.zst
    folder: msys2-sqlite
    sha256: e8330db6473f166e249028b8a2bfe87b3cfeaf55ab042bbbad007230f4c5d6dd
  - url: https://repo.msys2.org/msys/x86_64/libsqlite-{{ pkgver }}-{{ pkgrel }}-x86_64.pkg.tar.zst
    folder: msys2-libsqlite
    sha256: e0b80f0426d8cee0114f37f7579725a2117bb4dd9ffb0a7d94ee6610cfbd162d
  - url: https://repo.msys2.org/msys/x86_64/libsqlite-devel-{{ pkgver }}-{{ pkgrel }}-x86_64.pkg.tar.zst
    folder: msys2-libsqlite-devel
    sha256: 796de4fb6a3cca0efd2a4865649381ba9d51c2496c45962c4e5518ce17547f62
  - url: https://repo.msys2.org/msys/x86_64/sqlite-doc-{{ pkgver }}-{{ pkgrel }}-x86_64.pkg.tar.zst
    folder: msys2-sqlite-doc
    sha256: 52e0913164efa80296d360f586ea5b55c4481fb982cd4123f88fc492c1b44190
  - url: https://repo.msys2.org/msys/x86_64/tcl-sqlite-{{ pkgver }}-{{ pkgrel }}-x86_64.pkg.tar.zst
    folder: msys2-tcl-sqlite
    sha256: 9f8707dc491dd2f0cae8fb0db43d5e090f007c1e19e2e093b4490db355f002c6
  - url: https://repo.msys2.org/msys/x86_64/sqlite-extensions-{{ pkgver }}-{{ pkgrel }}-x86_64.pkg.tar.zst
    folder: msys2-sqlite-extensions
    sha256: c116342742d3e89a6a249f030a69f2c3e5eed64610b6deae9f10c0f4ab6f66e9
  - url: https://repo.msys2.org/msys/x86_64/lemon-{{ pkgver }}-{{ pkgrel }}-x86_64.pkg.tar.zst
    folder: msys2-lemon
    sha256: 34a61b25b8cbef4ac14742e43c6f8b8faf41eaec1c0bef33e21f5b282d58094b

build:
  number: {{ build_number }}
  binary_relocation: false
  detect_binary_files_with_prefix: false
  skip: True             # [not win]

outputs:
  - name: msys2-sqlite
    skip: True          # [not (win and x86_64)]
    script: repack.bat  # [win]
    build:
      number: {{ build_number }}
      missing_dso_whitelist:
        - $RPATH/libtcl8.6.dll                               # [win]
        - $RPATH/msys-2.0.dll                                # [win]
        - $RPATH/msys-readline8.dll                          # [win]
        - $RPATH/msys-z.dll                                  # [win]
    requirements:
      build:
      host:
      run:
        - msys2-msys-mutex * msys2
        - msys2-libreadline                        >=8.2.013    # libreadline
        - msys2-zlib                               >=1.3.1      # zlib
        - msys2-tcl                                >=8.6.12     # tcl
        - msys2-msys2-runtime                      >=3.5.4      # msys-2.0.dll
      run_constrained:
        - m2-sqlite                                 <0a0
        - m2-msys2-runtime                          <0a0

    test:
      commands:
        - test -f $PREFIX/Library/usr/bin/dbhash.exe                             # [unix]
        - IF NOT EXIST %PREFIX%\Library\usr\bin\dbhash.exe EXIT /B 1             # [win]
    about:
      home: https://www.sqlite.org/
      summary: "A C library that implements an SQL database engine (repack of MSYS2-packages sqlite for MSYS)"
      license: Other
      license_file:
        - {{ RECIPE_DIR }}/src_licenses/usr/share/licenses/sqlite/LICENSE
  - name: msys2-libsqlite
    skip: True          # [not (win and x86_64)]
    script: repack.bat  # [win]
    build:
      number: {{ build_number }}
      missing_dso_whitelist:
        - $RPATH/msys-2.0.dll                                # [win]
    requirements:
      build:
      host:
      run:
        - msys2-msys-mutex * msys2
        - msys2-msys2-runtime                      >=3.5.4      # msys-2.0.dll
      run_constrained:
        - m2-libsqlite                              <0a0
        - m2-msys2-runtime                          <0a0

    test:
      commands:
        - test -f $PREFIX/Library/usr/bin/msys-sqlite3-0.dll                     # [unix]
        - IF NOT EXIST %PREFIX%\Library\usr\bin\msys-sqlite3-0.dll EXIT /B 1     # [win]
    about:
      home: https://www.sqlite.org/
      summary: "A C library that implements an SQL database engine (repack of MSYS2-packages libsqlite for MSYS)"
      license: Other
      license_file:
        - {{ RECIPE_DIR }}/src_licenses/usr/share/licenses/libsqlite/LICENSE
  - name: msys2-libsqlite-devel
    skip: True          # [not (win and x86_64)]
    script: repack.bat  # [win]
    build:
      number: {{ build_number }}
    requirements:
      build:
      host:
      run:
        - msys2-msys-mutex * msys2
        - msys2-libsqlite                           =3.46.1     # libsqlite=3.46.1
        - msys2-zlib-devel                         >=1.3.1      # zlib-devel
      run_constrained:
        - m2-libsqlite-devel                        <0a0
        - m2-msys2-runtime                          <0a0

    test:
      commands:
        - test -f $PREFIX/Library/usr/include/sqlite3.h                          # [unix]
        - IF NOT EXIST %PREFIX%\Library\usr\include\sqlite3.h EXIT /B 1          # [win]
    about:
      home: https://www.sqlite.org/
      summary: "A C library that implements an SQL database engine (repack of MSYS2-packages libsqlite-devel for MSYS)"
      license: Other
      license_file:
        - {{ RECIPE_DIR }}/src_licenses/usr/share/licenses/libsqlite-devel/LICENSE
  - name: msys2-sqlite-doc
    skip: True          # [not (win and x86_64)]
    script: repack.bat  # [win]
    build:
      number: {{ build_number }}
    requirements:
      build:
      host:
      run:
        - msys2-msys-mutex * msys2
      run_constrained:
        - m2-sqlite-doc                             <0a0
        - m2-msys2-runtime                          <0a0

    test:
      commands:
        - test -f $PREFIX/Library/usr/share/doc/sqlite/34to35.html               # [unix]
        - IF NOT EXIST %PREFIX%\Library\usr\share\doc\sqlite\34to35.html EXIT /B 1 # [win]
    about:
      home: https://www.sqlite.org/
      summary: "A C library that implements an SQL database engine (repack of MSYS2-packages sqlite-doc for MSYS)"
      license: Other
      license_file:
        - {{ RECIPE_DIR }}/src_licenses/usr/share/licenses/sqlite-doc/LICENSE
  - name: msys2-tcl-sqlite
    skip: True          # [not (win and x86_64)]
    script: repack.bat  # [win]
    build:
      number: {{ build_number }}
      missing_dso_whitelist:
        - $RPATH/msys-2.0.dll                                # [win]
        - $RPATH/msys-sqlite3-0.dll                          # [win]
    requirements:
      build:
      host:
      run:
        - msys2-msys-mutex * msys2
        - msys2-libsqlite                           =3.46.1     # libsqlite=3.46.1
        - msys2-tcl                                >=8.6.12     # tcl
        - msys2-msys2-runtime                      >=3.5.4      # msys-2.0.dll
      run_constrained:
        - m2-tcl-sqlite                             <0a0
        - m2-msys2-runtime                          <0a0

    test:
      commands:
        - test -f $PREFIX/Library/usr/lib/tcl8.6/sqlite3/msys-tclsqlite3.dll     # [unix]
        - IF NOT EXIST %PREFIX%\Library\usr\lib\tcl8.6\sqlite3\msys-tclsqlite3.dll EXIT /B 1 # [win]
    about:
      home: https://www.sqlite.org/
      summary: "A C library that implements an SQL database engine (repack of MSYS2-packages tcl-sqlite for MSYS)"
      license: Other
      license_file:
        - {{ RECIPE_DIR }}/src_licenses/usr/share/licenses/tcl-sqlite/LICENSE
  - name: msys2-sqlite-extensions
    skip: True          # [not (win and x86_64)]
    script: repack.bat  # [win]
    build:
      number: {{ build_number }}
      missing_dso_whitelist:
        - $RPATH/msys-2.0.dll                                # [win]
        - $RPATH/msys-sqlite3-0.dll                          # [win]
        - $RPATH/msys-z.dll                                  # [win]
    requirements:
      build:
      host:
      run:
        - msys2-msys-mutex * msys2
        - msys2-sqlite                              =3.46.1     # sqlite=3.46.1
        - msys2-libsqlite                           =3.46.1     # libsqlite=3.46.1
        - msys2-msys2-runtime                      >=3.5.4      # msys-2.0.dll
        - msys2-zlib                               >=1.3.1      # msys-z.dll
      run_constrained:
        - m2-sqlite-extensions                      <0a0
        - m2-msys2-runtime                          <0a0

    test:
      commands:
        - test -f $PREFIX/Library/usr/bin/msys-sqlite3amatch-0.dll               # [unix]
        - IF NOT EXIST %PREFIX%\Library\usr\bin\msys-sqlite3amatch-0.dll EXIT /B 1 # [win]
    about:
      home: https://www.sqlite.org/
      summary: "A C library that implements an SQL database engine (repack of MSYS2-packages sqlite-extensions for MSYS)"
      license: Other
      license_file:
        - {{ RECIPE_DIR }}/src_licenses/usr/share/licenses/sqlite-extensions/LICENSE
  - name: msys2-lemon
    skip: True          # [not (win and x86_64)]
    script: repack.bat  # [win]
    build:
      number: {{ build_number }}
      missing_dso_whitelist:
        - $RPATH/msys-2.0.dll                                # [win]
    requirements:
      build:
      host:
      run:
        - msys2-msys-mutex * msys2
        - msys2-msys2-runtime                      >=3.5.4      # msys-2.0.dll
      run_constrained:
        - m2-lemon                                  <0a0
        - m2-msys2-runtime                          <0a0

    test:
      commands:
        - test -f $PREFIX/Library/usr/bin/lemon.exe                              # [unix]
        - IF NOT EXIST %PREFIX%\Library\usr\bin\lemon.exe EXIT /B 1              # [win]
    about:
      home: https://www.sqlite.org/
      summary: "A C library that implements an SQL database engine (repack of MSYS2-packages lemon for MSYS)"
      license: Other
      license_file:
        - {{ RECIPE_DIR }}/src_licenses/usr/share/licenses/lemon/LICENSE
